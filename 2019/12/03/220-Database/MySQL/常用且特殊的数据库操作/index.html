<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>静言思之</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/lib/github-markdown-css/github-markdown.css">
</head>
<body>
<div class="container">
<header class="header">
    <div class="blog-title">
        <a href="/" class="logo">静言思之</a>
    </div>
    <nav class="navbar">
        <ul class="menu">
            
                <li class="menu-item">
                    <a href="/" class="menu-item-link">首页</a>
                </li>
            
                <li class="menu-item">
                    <a href="/archives" class="menu-item-link">归档</a>
                </li>
            
                <li class="menu-item">
                    <a href="https://github.com/ahonn" target="_blank" rel="noopener" class="menu-item-link">交友</a>
                </li>
            
        </ul>
    </nav>
</header>
<main class="main">
    <article class="post">
    <div class="post-title">
        <h2 class="title">220-Database/MySQL/常用且特殊的数据库操作</h2>
    </div>
    <div class="post-meta">
        <span class="post-time">2019-12-03</span>
    </div>
    <div class="markdown-body">
        <h3 id="1-替换字段中的特殊字符串"><a href="#1-替换字段中的特殊字符串" class="headerlink" title="1. 替换字段中的特殊字符串"></a>1. 替换字段中的特殊字符串</h3><pre><code class="sql">-- 将 goods 表字段 title 中的 &#39;AAA&#39; 全部替换成 &#39;BBB&#39;
UPDATE goods SET title=REPLACE(title, &#39;AAA&#39;, &#39;BBB&#39;) WHERE title LIKE &#39;%AAA%&#39; ;</code></pre>
<h3 id="2-日期函数-DATE-FORMAT"><a href="#2-日期函数-DATE-FORMAT" class="headerlink" title="2. 日期函数 DATE_FORMAT"></a>2. 日期函数 DATE_FORMAT</h3><p><code>DATE_FORMAT(date, format)</code> 将数据库日期按照格式转为字符串</p>
<pre><code class="sql"> -- 根据时间范围查询
DATE_FORMAT(create_time, &#39;%y%m%d&#39;) &gt; DATE_FORMAT(&#39;2019-03-11&#39;, &#39;%y%m%d&#39;)
AND
DATE_FORMAT(create_time, &#39;%y%m%d&#39;) &lt; DATE_FORMAT(&#39;2020-03-11&#39;, &#39;%y%m%d&#39;)

-- 查询生日
DATE_FORMAT(birthday, &#39;%m%d&#39;) = DATE_FORMAT(&#39;12-29&#39;, &#39;%m%d&#39;)</code></pre>
<h3 id="3-INSERT-SELECT"><a href="#3-INSERT-SELECT" class="headerlink" title="3. INSERT SELECT"></a>3. INSERT SELECT</h3><pre><code class="sql">-- 给所有女性用户插入一条礼品记录
INSERT INTO gift(user_id, name) 
SELECT user_id, &#39;手绳&#39; as name 
FROM user 
WHERE sex=&#39;女&#39; ;

-- 将 user 表数据复制到 user_copy 表
INSERT INTO user_copy FROM user ;</code></pre>
<h3 id="4、UPDATE-JOIN"><a href="#4、UPDATE-JOIN" class="headerlink" title="4、UPDATE JOIN"></a>4、UPDATE JOIN</h3><pre><code class="mysql">-- 关联user表no字段和customer表的no字段，将user表的其他字段更新到customer表中
UPDATE customer c
JOIN user u
    ON u.no=c.no
SET c.name=u.name, c.age=u.age;
</code></pre>

    </div>
</article>
</main>
</div>
</body>
</html>